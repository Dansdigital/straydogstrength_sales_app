import React__default from 'react';
import { isFunction } from '@aws-amplify/ui';

const DEFAULT_PAGE_SIZE = 100;
const usePaginate = ({ items, onPaginate, page = 1, pageSize = DEFAULT_PAGE_SIZE, }) => {
    const [currentPage, setCurrentPage] = React__default.useState(page);
    const visitedRef = React__default.useRef(page);
    const handleReset = React__default.useRef(() => {
        setCurrentPage(page);
        // set `visitedRef` to initially provided `page`
        visitedRef.current = page;
    }).current;
    return React__default.useMemo(() => {
        const hasItems = Array.isArray(items);
        const highestPageVisited = visitedRef.current;
        const isFirstPage = currentPage === 1;
        const start = isFirstPage ? 0 : (currentPage - 1) * pageSize;
        const end = isFirstPage ? pageSize : currentPage * pageSize;
        const pageItems = hasItems ? items.slice(start, end) : [];
        return {
            currentPage,
            handlePaginate: (page) => {
                if (page < 1)
                    return;
                if (isFunction(onPaginate))
                    onPaginate(page);
                if (page > currentPage)
                    visitedRef.current = page;
                setCurrentPage(page);
            },
            handleReset,
            highestPageVisited,
            pageItems,
        };
    }, [currentPage, handleReset, items, onPaginate, pageSize]);
};

export { usePaginate };
