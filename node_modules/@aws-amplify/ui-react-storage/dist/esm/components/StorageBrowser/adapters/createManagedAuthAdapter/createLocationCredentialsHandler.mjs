import { getDataAccess } from '@aws-amplify/storage/internals';
import { toAccessGrantPermission } from '../permissionParsers.mjs';

const createLocationCredentialsHandler = (handlerInput) => {
    const { accountId, region, credentialsProvider, customEndpoint } = handlerInput;
    /**
     * Retrieves credentials for the specified scope & permission.
     *
     * @param input - An object specifying the requested scope & permission.
     *
     * @returns A promise which will resolve with the requested credentials.
     */
    return (input) => {
        const { scope, permissions } = input;
        return getDataAccess({
            accountId,
            credentialsProvider,
            permission: toAccessGrantPermission(permissions),
            region,
            scope,
            customEndpoint,
        });
    };
};

export { createLocationCredentialsHandler };
